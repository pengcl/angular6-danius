(function(e){var r={};var t=window.navigator;var n=+new Date;var a=true;var o=1e3*60*10;var i={};var u=false;window.jsreport=window.maya=function(){var f={bid:102};var s=function(e,o,i,u,m){if(!a)return false;var d=s.bid||f.bid;u=Number(u)||4;if(!r.info){r.info={};r.info.userAgent=t.userAgent;r.info.platform=t.platform;r.info.appCodeName=t.appCodeName;r.info.appName=t.appName;r.info.appVersion=t.appVersion}var v=r.info;var g=v&&["|_|browser:[","agent:"+v.userAgent,",plat:"+v.platform,",appcode:"+v.appCodeName,",appname:"+v.appName,",appversion:"+v.appVersion+"]","|_|"+"st:"+(+new Date-n)].join("")||"";var y=s.reportUrl||location.href;setTimeout(function(){if(typeof e=="object"&&e.toString){var r=e.toString();if(r.indexOf("[object event]")>-1){e=l(e)}}var t="type="+m+"&level="+u+"&bid="+d+"&surl="+encodeURIComponent(y)+"&referer="+encodeURIComponent(document.referrer)+"&msg="+encodeURIComponent(e)+"|_|"+i;if(e!=="v"&&c(t)){return}var n=new Image;var a="https://h5.qianbao.qq.com/maya/report?";n.src=a+t+g+"|_|"+o+"&r="+Math.random();e!=="v"&&p(t)},s.buffTime*1e3)};function p(e){var r=Math.floor(Date.now()/o)*o+"",t=i[r];i={};t?i[r]=t.concat([e]):i[r]=[e]}function c(e){var r=Math.floor(Date.now()/o)*o+"";if(i[r]&&i[r].indexOf(e)>-1){return true}return false}function l(e){var r=[],t=0,n;if(e.toString){r.push(e.toString())}for(n in e){if(t++>30)break;try{if(typeof e[n]=="object"){r.push(n+"="+e[n].toString().replace(/[\n\s\r]/g,""))}else{r.push(n+"="+e[n])}}catch(a){r.push(n+"=read-err#"+a.message)}}return r.join("&")}s.init=function(e,r,t){if(!s.bid&&typeof e=="undefined"){throw"maya缺少bid";return}s.rate=r||100;s.buffTime=t||1;s.bid=e||s.bid;if(Math.random()>s.rate/100){return a=false}this.report("v",s.reportUrl||location.href,0,1,1)};s.setting=function(e,r){e=e||{};s.reportUrl=e.reportUrl;r&&this.report("v",s.reportUrl||location.href,0,1,1)};s.report=function(e,r,t,n,a){if(arguments.length==2){s(e,s.reportUrl||location.href,0,4,r)}else{s(e,r||s.reportUrl||location.href,t||0,n||4,a||2)}};s.trace=function(e){typeof e==="object"&&(e=JSON.stringify(e));if(e.length>5e3){console.warn("上报内容过长，请控制在5000字符以内");return}s(e,null,null,3,0)};s.reportPerformance=function(){if(u===true){return}u=true;var e=null,r=[],t;if(window.performance&&window.performance.getEntries){e=window.performance.getEntries()}if(!e){return}for(t=0;t<e.length;t++){var n=e[t],a={};if(n.initiatorType&&["link","script"].indexOf(n.initiatorType)>-1){a.name=n.name;a.st=Math.ceil(n.startTime)||0;a.reqs=Math.ceil(n.requestStart)||0;a.reps=Math.ceil(n.responseStart)||0;a.repe=Math.ceil(n.responseEnd)||0}a.name&&r.push(a)}this.trace("Performance:"+JSON.stringify({timing:window.performance.timing,entries:r}))};var m=[];var d=function(){var r="";if(arguments.length==1&&typeof arguments[0]=="object"){var t="";if(arguments[0].target){t=arguments[0].target.src}s.apply(e,["oneargs#"+t+"#"+l(arguments[0]),"",0,null,-1])}else{if(arguments[4]&&typeof arguments[4]=="object"){r=(arguments[4].stack||"").replace(/\n/g,"")}m.splice.apply(arguments,[3,0,null,-1]);arguments[0]+="#stack:"+r;s.apply(e,arguments)}};e.onerror=d;var v=function(e,r){for(var t in r){e[t]=r[t]}};var g=function(e){return typeof e==="function"};var y;var w=function(r,t){return function(){try{return r.apply(this,t||arguments)}catch(n){if(!n.reported){n.reported=true;d(n.message,"",0,0,n);if(!y){e.onerror=function(){};y=setTimeout(function(){e.onerror=d;y=null},500)}}throw n}}};var h=function(e){var r,t;for(r in e){t=e[r];if(g(t))e[r]=w(t)}return e};var b=function(e){return function(){var r,t=[];for(var n=0,a=arguments.length;n<a;n++){r=arguments[n];g(r)&&(r=w(r));t.push(r)}return e.apply(this,t)}};var S=function(e,r){return function(){var t,n,a=[];for(var o=0,i=arguments.length;o<i;o++){t=arguments[o];g(t)&&(n=w(t))&&(t.tryWrap=n)&&(t=n);a.push(t)}return e.apply(r||this,a)}};var q=function(e){return function(r,t){if(typeof r==="string"){try{r=new Function(r)}catch(n){throw n}}var a=[].slice.call(arguments,2);var o=w(r,a.length&&a);return e(o,t||0)}};var j={system:false,jquery:false,modules:false,vue:false,zero:false};s.spyJquery=function(){var r=e.$;if(j.jQuery){return s}if(!r||!r.event){return s}var t,n;if(r.zepto){t=r.fn.on,n=r.fn.off;r.fn.on=S(t);r.fn.off=function(){var e,r=[];for(var t=0,a=arguments.length;t<a;t++){e=arguments[t];g(e)&&e.tryWrap&&(e=e.tryWrap);r.push(e)}return n.apply(this,r)}}else if(window.jQuery){t=r.event.add,n=r.event.remove;r.event.add=S(t);r.event.remove=function(){var e,r=[];for(var t=0,a=arguments.length;t<a;t++){e=arguments[t];g(e)&&e.tryWrap&&(e=e.tryWrap);r.push(e)}return n.apply(this,r)}}var a=r.ajax;if(a){r.ajax=function(e,t){if(!t){t=e;e=undefined}h(t);if(e)return a.call(r,e,t);return a.call(r,t)}}j.jQuery=true;return s};s.spyModules=function(){var r=e.require,t=e.define;if(j.modules){return s}if(t&&t.amd&&r){e.require=b(r);v(e.require,r);e.define=b(t);v(e.define,t);j.modules=true}if(e.seajs&&t){e.define=function(){var e,r=[];for(var n=0,a=arguments.length;n<a;n++){e=arguments[n];if(g(e)){e=w(e);e.toString=function(e){return function(){return e.toString()}}(arguments[n])}r.push(e)}return t.apply(this,r)};e.seajs.use=b(e.seajs.use);v(e.define,t);j.modules=true}return s};s.spySystem=function(){if(j.system){return s}j.system=true;e.setTimeout=q(e.setTimeout);e.setInterval=q(e.setInterval);return s};s.spyCustom=function(e){if(g(e)){return w(e)}else{return h(e)}};var M=false;s.spyVue=function(r){var t=e.Vue||r;if(j.vue){return s}if(!t){!M&&console.warn("maya: 没有找到名为Vue的全局变量，请手动调用 maya.spyVue(Vue)");M=true;return}if(+t.version.split(".")[0]<2){!M&&console.warn("maya: 暂只支持 Vue 2.0.0 及以上版本");M=true;return}t.mixin({beforeCreate:function(){var e=this.$options,r=["watch","computed","methods","beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated"],t=r.length;for(var n=0;n<t;n++){e[r[n]]&&h(e[r[n]])}}});j.vue=true;return s};s.spyZero=function(){if(!window.qv||!window.qv.zero||!window.qv.zero.Page||!window.qv.zero.Http){return}if(j.zero){return s}var e=qv.zero.Page,r=qv.zero.Http;qv.zero.Page=function(r){h(r);return new e(r)};r.send&&(r.send=b(r.send));r.SSOSend&&(r.SSOSend=b(r.SSOSend));r.loadScript&&(r.loadScript=b(r.loadScript));j.zero=true;return s};return s}()})(window);(function(){var e=n("monitor_try"),r=window.pluginData&&window.pluginData.bid,t=window.pluginData&&window.pluginData.rate;function n(e,r){var t="[?&]"+e+"=([^&#]*)[&#]?",n=new RegExp(r?"(?:(?:/maya[-\\.\\d]*\\.js)|(?:qianbao.qq.com/plugin)).*"+t:t,"i"),a=n.exec(r||location.search);return a?a[1]:""}function a(){e=+e;if(!e){return}(e&1)===1&&maya.spySystem();(e&2)===2&&maya.spyJquery();(e&4)===4&&maya.spyModules();(e&8)===8&&maya.spyVue();(e&16)===16&&maya.spyZero()}function o(){var o=document.getElementsByTagName("script"),i;for(var u=0,f=o.length;u<f;u++){i=o[u].src;n("rpt_bid",i)&&(r=n("rpt_bid",i));n("rate",i)&&(t=n("rate",i));n("monitor_try",i)&&(e=n("monitor_try",i))}r&&(maya.init(r,t),a())}window.addEventListener&&document.addEventListener("load",a,true);window.onload=function(){if(!window.performance){return}if(Date.now()-performance.timing.navigationStart>3e3){maya.reportPerformance()}};o()})();